include ../header
include dashboardHeader
style.
    .edit-card .update {
        display: none;
    }
title SNT-#{formatName(loggedInUser.first_name, loggedInUser.last_name)} | Setting | Phone Numbers
.matter
    .container
        .row
            .content.col-md-4
                .row
                    nav.navbar.navbar-default.section-navbar(role='navigation')
                        .navbar-header
                            button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#networks-collapse')
                                span.sr-only Toggle profile navigation
                                i.icon-plus
                                i.icon-minus
                            .visible-xs.navbar-brand.network-brand Profile
                        .collapse.navbar-collapse#sectionNav
                            ul.nav.nav-pills.nav-stacked
                                li.active
                                    a(href=DashboardUrls.userSettingPhone(loggedInUser.id)) Phone Numbers
                                li
                                    a(href=DashboardUrls.userSettingSchedule(loggedInUser.id)) Schedules and Pricing
                                li
                                    a(href=DashboardUrls.userSettingPassword(loggedInUser.id)) Change Password
            .content.col-md-8#sections
                .row
                    #userPhone
                        .card.main-card
                            .addit
                                a.btn.btn-primary.createCardBtn Add a Phone Number
                                    i.icon-plus
                            if (userPhone && userPhone.length > 0)
                                for phone in userPhone
                                    .item
                                        .row
                                            big.col-xs-8 #{formatPhone(phone)}
                                            .header-link.col-xs-4
                                                a.btn.btn-primary.editPhoneBtn(data-id=phone.id)
                                                    i.icon-pencil
                            else
                                .alert.alert-warning
                                    strong You have not added any phone numbers yet.
                                    p You will need to add atleast one phone number to receive calls.
                        .card.edit-card
                            form
                                .alert.alert-danger(style='display: none;')
                                .item-edit
                                    .item
                                        .header-row.row
                                            h5.col-xs-8 Phone Number
                                            .header-link.col-xs-4
                                                a.btn.btn-danger.cancelEditCardBtn
                                                    i.icon-cancel
                                    .item
                                        .row
                                            h3 Phone Number:
                                            .form-group
                                                .input-group
                                                    .input-group-btn
                                                        select.btn(style="width: 150px", name="country_code")
                                                            for name,abb in CountryName
                                                                -var code = CountryCode[abb];
                                                                option(value=code, selected=code ==country_code)= name + ' (+' + code + ')'
                                                    .input-group-btn
                                                        input.form-control(style="width: 150px", type='text', placeholder='Area Code', name="area_code")
                                                    input.form-control.phone-number#caller-phone(type='text', placeholder='Phone Number', name="phone")
                                            .clearer
                                            h3.update Verification Code:
                                            .form-group.update
                                                input.form-control(name='code', placeholder='Enter verification code')
                                            div.links-editing
                                                p.edit-schedules
                                                    input(type='hidden', name='id')
                                                    input.btn.btn-primary.sendCode(type='submit', value='Send Verification Code', name='sendCode')
                                                    input.btn.btn-primary.update(type='submit', value='Verify and Update', name='update')
script.
    var userPhones = JSON.parse( '!{JSON.stringify(userPhone || [])}' );
script(src='/js/app/dashboard/userSettingPhone.js')
include ../footer