title Scheduling
include ../header
// /.masthead
.matter
    .container
        .row
            .content.col-xs-9.col-sm-9.col-md-12.col-lg-12
                .row
                    .col-md-6
                        .call-profile
                            h1= formatName(call.user.first_name, call.user.last_name, call.user.title)
                                | &nbsp; has requested to speak to you
                            .meta
                                h5 Call Agenda
                                p= call.agenda
                            .meta
                                h5 Duration
                                p= call.duration
                                    | &nbsp; mins.
                    .col-md-6
                        .call-card
                            form#scheduling(action=ApiUrlDelegate.phoneCallScheduling(call.id))
                                .payment-summary.call-inputs
                                    h1
                                        i.icon-bill
                                        | Suggested Time
                                    h3 Pick one of the suggested slots
                                    for slot in startTimes
                                        p.title
                                            input(type='radio', name='startTime', value=slot, checked=selectedStartTime == slot)
                                            label= formatDate(slot)
                                    h3 Or Suggest another time convenient to you
                                    input(type='text', name='startTime')
                                .payment-summary.call-inputs
                                    h1
                                        i.icon-phone
                                        | Your phone number
                                        .row
                                            if !phones
                                                .input-group
                                                    .input-group-btn
                                                        select.form-control#country-code
                                                            for code,country in CountryCode
                                                                option(value=country, selected=country == phones[0].country_code)= CountryName[code.toUpperCase()] + ' (+' + country + ')'
                                                    input.form-control#phone(type='text', value=phones ? phones[0].phone : null)
                                                    .input-group-btn
                                                        a.btn.btn-success#verify-btn Verify
                                            else
                                                p= '+' + phones[0].country_code + '-' + phones[0].phone

                                input(type='hidden', name='phoneId', value=phones ? phones[0].id : null)
                                input(type='hidden', name='code', value=code)
                                input.btn.btn-primary.btn-block(type='submit', value='Confirm')
                                .call-reversal
                                    a.btn.btn-danger#reject-call
                                        | Cancel
                                        i.icon-cancel

include ../footer
script.
    var callId = '!{call.id}';
script(src='/js/app/callScheduling/scheduling.js')